<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>文章总览 - 汉语古音手册</title>
  <link rel="icon" href="https://pic1.imgdb.cn/item/698dc2031d67521e9b492114.png" type="image/png" />
  <style>
    :root{--bar-height:64px;--footer-height:50px;--glass-bg:rgba(255,255,255,.35);--glass-border:1px solid rgba(208,215,230,.72);--font-sans:'HarmonyOS Sans SC','HarmonyOS Sans','PingFang SC','Microsoft YaHei','Noto Sans CJK SC','Segoe UI',sans-serif;--btn-radius:10px;--bottom-safe:calc(var(--footer-height) + 72px)}
    *{box-sizing:border-box}
    body{margin:0;font-family:var(--font-sans);background:#ecf2f9;color:#1f3349;padding-top:var(--bar-height);padding-bottom:var(--bottom-safe)}
    .topbar{position:fixed;top:0;left:0;right:0;height:var(--bar-height);display:flex;align-items:center;gap:10px;padding:12px 18px;background:rgba(255,255,255,.35);-webkit-backdrop-filter:blur(15px) saturate(130%);backdrop-filter:blur(15px) saturate(130%);border-bottom:1px solid rgba(230,233,239,.6);box-shadow:0 2px 12px rgba(11,59,102,.08);z-index:1000}
    .brand{font-weight:700;color:#2b6cb0;text-decoration:none}
    .btn{margin-left:auto;padding:8px 12px;border-radius:var(--btn-radius);text-decoration:none;color:#2b6cb0;background:var(--glass-bg);border:var(--glass-border);-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%)}
    .mobile-corner-btn{display:none;position:fixed;top:10px;z-index:1200;width:48px;height:48px;align-items:center;justify-content:center;border-radius:12px;text-decoration:none;color:#2b6cb0;background:var(--glass-bg);border:var(--glass-border);-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);box-shadow:0 2px 8px rgba(43,108,176,.2);font-size:14px;font-weight:600;line-height:1}
    .mobile-corner-btn svg{width:20px;height:20px;stroke:currentColor;fill:none;stroke-width:2.2;stroke-linecap:round;stroke-linejoin:round}
    .mobile-corner-btn.left{left:10px}
    .mobile-corner-btn.right{right:10px}
    .wrap{max-width:1180px;margin:24px auto;padding:0 14px;display:grid;grid-template-columns:1fr 320px;gap:18px}
    .panel{background:var(--glass-bg);border:var(--glass-border);border-radius:16px;-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);box-shadow:0 12px 28px rgba(13,29,52,.08);padding:16px}
    h1{margin:0 0 8px;color:#173c64}
    .muted{color:#5f7a97;font-size:13px}
    .list{display:flex;flex-direction:column;gap:10px;margin-top:14px}
    .item{display:block;padding:12px;border-radius:12px;border:var(--glass-border);background:rgba(255,255,255,.52);text-decoration:none;color:inherit;transition:transform .2s, box-shadow .2s, background .2s}
    .item:hover{transform:translateY(-1px);background:rgba(255,255,255,.74);box-shadow:0 6px 16px rgba(13,29,52,.09)}
    .item-title{color:#1e4f85;font-weight:700}
    .meta{margin-top:4px;color:#5f7a97;font-size:13px}
    .summary{margin-top:6px;font-size:14px;line-height:1.65}
    .cat-group{margin-bottom:14px}
    .cat-title{font-size:13px;font-weight:700;color:#2b6cb0;margin-bottom:8px}
    .timeline{display:flex;flex-direction:column;gap:8px}
    .time-item{display:block;padding:9px 10px;border-radius:10px;border:var(--glass-border);background:rgba(255,255,255,.52);text-decoration:none;color:inherit;transition:transform .2s, background .2s}
    .time-item:hover{transform:translateY(-1px);background:rgba(255,255,255,.74)}
    .time-item-title{text-decoration:none;color:#2b6cb0;font-size:14px}
    footer.site-footer{position:fixed;inset:auto 12px 10px 12px;width:auto;max-width:none;z-index:1000;margin:0;border-radius:14px;background:var(--glass-bg);-webkit-backdrop-filter:blur(18px) saturate(145%);backdrop-filter:blur(18px) saturate(145%);padding:10px 12px;height:var(--footer-height);box-sizing:border-box;border:1px solid rgba(230,233,239,.6);box-shadow:0 -2px 10px rgba(11,59,102,.06);display:flex;align-items:center;justify-content:center;text-align:center;color:#666;font-size:13px}
    .footer-content{display:flex;align-items:center;gap:8px;white-space:nowrap}
    .footer-link{display:inline-flex;align-items:center;gap:4px;color:#2b6cb0;text-decoration:none;opacity:.85;transition:opacity .2s,transform .2s}
    .footer-link:hover{opacity:1;transform:translateY(-1px)}
    .footer-link svg{width:12px;height:12px;display:block}
    .article-search-pop{position:fixed;top:66px;right:12px;z-index:1250;display:none;width:min(78vw,280px);padding:8px;border-radius:12px;border:var(--glass-border);background:var(--glass-bg);-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);box-shadow:0 4px 12px rgba(11,59,102,.12)}
    .article-search-pop.show{display:block}
    .article-search-input{width:100%;height:40px;box-sizing:border-box;padding:0 12px;border-radius:10px;border:var(--glass-border);background:rgba(255,255,255,.5);color:#1f3349;font-size:14px}
    @supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
      .topbar,.btn,.mobile-corner-btn,.panel,footer.site-footer{background:rgba(255,255,255,0.78) !important}
    }
    @media (max-width:980px){
      :root{--bar-height:72px;--footer-height:64px}
      body{padding-top:72px}
      .wrap{grid-template-columns:1fr}
      .brand,.btn{display:none}
      .topbar{background:transparent;backdrop-filter:none;border:0;box-shadow:none;height:0;padding:0}
      .mobile-corner-btn{display:inline-flex}
      .article-search-pop{top:66px;right:12px}
      footer.site-footer{inset:auto 12px 10px 12px;width:auto;max-width:none;border-radius:14px;height:64px;padding:10px 12px;border:1px solid rgba(230,233,239,.6);box-shadow:0 -2px 10px rgba(11,59,102,.06)}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="index.html">汉语古音手册 · 文章总览</a>
    <a class="btn" href="index.html">返回词典</a>
  </header>
  <a class="mobile-corner-btn left" href="index.html" aria-label="主页" title="主页">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 11.5L12 4l9 7.5"></path><path d="M6.5 10.5V20h11v-9.5"></path></svg>
  </a>
  <button id="mobile-article-search-btn" class="mobile-corner-btn right" type="button" aria-label="搜索站内文章" title="搜索站内文章">
    <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="6"></circle><line x1="16.5" y1="16.5" x2="21" y2="21"></line></svg>
  </button>
  <div id="article-search-pop" class="article-search-pop">
    <input id="article-search-pop-input" class="article-search-input" type="search" placeholder="搜索站内文章..." aria-label="搜索站内文章" />
  </div>

  <main class="wrap">
    <section class="panel">
      <h1>全部文章</h1>
      <div class="muted">按发布时间倒序，支持后续扩展到更多栏目。</div>
      <div id="all-list" class="list"><div class="item">加载中...</div></div>
    </section>
    <aside class="panel">
      <div class="cat-group">
        <div class="cat-title">按分类浏览</div>
        <div id="cat-list"></div>
      </div>
      <div>
        <div class="cat-title">时间线</div>
        <div id="timeline" class="timeline"></div>
      </div>
    </aside>
  </main>

  <footer class="site-footer">
    <div class="footer-content">
      <span>© 2026 Takion Kroslin</span>
      <span>|</span>
      <a href="https://github.com/TakionKroslin/dictionary" target="_blank" class="footer-link" title="GitHub" aria-label="GitHub">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5C5.65.5.5 5.66.5 12.02c0 5.09 3.3 9.41 7.88 10.94.58.1.79-.25.79-.56v-2.02c-3.2.69-3.88-1.55-3.88-1.55-.53-1.33-1.28-1.69-1.28-1.69-1.04-.71.08-.7.08-.7 1.15.09 1.75 1.18 1.75 1.18 1.01 1.75 2.67 1.24 3.33.95.1-.73.4-1.24.72-1.52-2.56-.29-5.25-1.28-5.25-5.69 0-1.26.45-2.3 1.18-3.11-.12-.29-.51-1.46.11-3.04 0 0 .96-.31 3.15 1.19a10.8 10.8 0 0 1 5.74 0c2.18-1.5 3.14-1.19 3.14-1.19.62 1.58.23 2.75.11 3.04.73.81 1.18 1.85 1.18 3.11 0 4.42-2.7 5.4-5.27 5.68.41.36.78 1.07.78 2.15v3.19c0 .31.21.67.8.56a11.54 11.54 0 0 0 7.87-10.94C23.5 5.66 18.35.5 12 .5z"/></svg>
        <span>GitHub</span>
      </a>
    </div>
  </footer>

  <script>
    (function(){
      const CATALOG_PATH = 'articles/catalog.md';
      const mobileSearchBtn = document.getElementById('mobile-article-search-btn');
      const searchPop = document.getElementById('article-search-pop');
      const searchInput = document.getElementById('article-search-pop-input');
      function parseCatalog(md){
        const out=[];
        for(const raw of (md||'').split(/\r?\n/)){
          const line=raw.trim();
          const m=line.match(/^- \[(.+?)\]\((.+?)\)\s*\|\s*(.+)$/);
          if(!m) continue;
          const parts = (m[3] || '').split('|').map((x)=>x.trim());
          out.push({
            title:m[1].trim(),
            path:m[2].trim(),
            date:parts[0] || '',
            author:parts[1] || '',
            summary:parts[2] || '',
            category:parts[3] || '未分类'
          });
        }
        return out;
      }
      function parseMetaTag(md){
        const m=(md||'').match(/<article-meta\s+([^>]*?)\s*><\/article-meta>/i) || (md||'').match(/<article-meta\s+([^>]*?)\s*\/>/i);
        if(!m) return {};
        const attrs={};
        const re=/(\w+)\s*=\s*"([^"]*)"/g;
        let t;
        while((t=re.exec(m[1]))){ attrs[t[1].toLowerCase()] = t[2]; }
        return attrs;
      }
      function toDate(x){ const d=new Date(x); return Number.isNaN(+d)?new Date('1970-01-01'):d; }
      function esc(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

      async function load(){
        const all = document.getElementById('all-list');
        const cat = document.getElementById('cat-list');
        const timeline = document.getElementById('timeline');
        try{
          const text = await fetch(CATALOG_PATH,{cache:'no-store'}).then(r=>{ if(!r.ok) throw new Error(`HTTP ${r.status}`); return r.text(); });
          let items = parseCatalog(text);
          await Promise.all(items.map(async (it)=>{
            try{
              const md = await fetch(it.path,{cache:'no-store'}).then(r=>r.ok?r.text():'');
              const meta = parseMetaTag(md);
              if(meta.date) it.date = meta.date;
              if(meta.author) it.author = meta.author;
              if(meta.category) it.category = meta.category;
              if(meta.title) it.title = meta.title;
            }catch(_){ }
          }));

          items = items.sort((a,b)=>toDate(b.date)-toDate(a.date));

          all.innerHTML = items.map((it)=>{
            const href = `article.html?file=${encodeURIComponent(it.path)}`;
            return `<a class="item" href="${href}"><div class="item-title">${esc(it.title)}</div><div class="meta">${esc(it.date)} · ${esc(it.author)} · ${esc(it.category||'未分类')}</div><div class="summary">${esc(it.summary)}</div></a>`;
          }).join('');

          const group = new Map();
          for(const it of items){
            const k = it.category || '未分类';
            if(!group.has(k)) group.set(k,[]);
            group.get(k).push(it);
          }
          cat.innerHTML = Array.from(group.entries()).map(([k,v])=>{
            const links = v.map((it)=>`<a class="time-item" style="margin:5px 0;" href="article.html?file=${encodeURIComponent(it.path)}"><span class="time-item-title">${esc(it.title)}</span></a>`).join('');
            return `<div class="time-item"><div style="font-size:12px;color:#5f7a97;margin-bottom:6px;">${esc(k)} (${v.length})</div>${links}</div>`;
          }).join('');

          timeline.innerHTML = items.map((it)=>`<a class="time-item" href="article.html?file=${encodeURIComponent(it.path)}"><div style="font-size:12px;color:#5f7a97;">${esc(it.date)}</div><span class="time-item-title">${esc(it.title)}</span></a>`).join('');
          const applyFilter = ()=>{
            if(!searchInput) return;
            const q = searchInput.value.trim().toLowerCase();
            all.querySelectorAll('.item').forEach((el)=>{
              const txt = (el.textContent || '').toLowerCase();
              el.style.display = !q || txt.includes(q) ? '' : 'none';
            });
          };
          if(searchInput){
            searchInput.addEventListener('input', ()=>{
              const q = searchInput.value.trim().toLowerCase();
              all.querySelectorAll('.item').forEach((el)=>{
                const txt = (el.textContent || '').toLowerCase();
                el.style.display = !q || txt.includes(q) ? '' : 'none';
              });
            });
          }
        }catch(err){
          all.innerHTML = `<div class="item">加载失败：${esc(String(err.message||err))}</div>`;
          cat.innerHTML = '<div class="time-item">-</div>';
          timeline.innerHTML = '<div class="time-item">-</div>';
        }
      }
      mobileSearchBtn?.addEventListener('click', ()=>{
        if(!searchPop || !searchInput) return;
        const show = !searchPop.classList.contains('show');
        searchPop.classList.toggle('show', show);
        if(show) searchInput.focus();
      });
      document.addEventListener('click', (e)=>{
        if(!searchPop || !mobileSearchBtn) return;
        const t = e.target;
        if(searchPop.contains(t) || mobileSearchBtn.contains(t)) return;
        searchPop.classList.remove('show');
      });
      load();
    })();
  </script>
</body>
</html>
    .article-search-wrap{margin-top:10px}
    .article-search{width:100%;height:40px;box-sizing:border-box;padding:0 12px;border-radius:10px;border:var(--glass-border);background:var(--glass-bg);color:#1f3349;-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);font-size:14px}
