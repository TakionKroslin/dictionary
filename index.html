<!doctype html>
<html lang="zh">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>æ±‰è¯­å¤éŸ³æ‰‹å†Œ â€” è¯å…¸</title>
	<link rel="icon" href="https://pic1.imgdb.cn/item/698dc2031d67521e9b492114.png" type="image/png">
	<link rel="prefetch" href="/assets/articles-8TKf3Hn8.html" as="document">
	<link rel="prefetch" href="/assets/article-BQf-_N5W.html" as="document">
	<link rel="prefetch" href="data:text/markdown;base64,77u/IyDnq5nlhoXmlofnq6Dnm67lvZUNCg0KLSBb5bu656uZ6K+05piO77ya5LuO5LiA5Lu96LaF5aSnVFhU5Yiw5Y+v5qOA57Si55qE5Y+k6Z+z6K+N5YW4572R56uZXShhcnRpY2xlcy9vdmVydmlldy5tZCkgfCAyMDI2LTAyLTI0IHwgVGFraW9uIEtyb3NsaW4gfCDorrLov7Dlu7rnq5nliqjmnLrjgIHliIbniYfmlrnmoYjjgIHmo4DntKLkuI7kuqTkupLorr7orqHvvIzku6Xlj4rlpoLkvZXorqnlj6Tpn7PotYTmlpnmm7TmmJPorr/pl67jgIINCi0gW+acgOaWsOeJiOacrOWKn+iDveWFqOino++8mue7n+S4gFVJ44CB56e75Yqo56uv5L6n5qCP44CB5LiK5LiL56+H44CB5LqM57u056CB5YiG5Lqr5LiOTWFya2Rvd27lhYPkv6Hmga9dKGFydGljbGVzL3BvbHlwaG9ueS5tZCkgfCAyMDI2LTAyLTI0IHwgVGFraW9uIEtyb3NsaW4gfCDlrozmlbTor7TmmI7mnKzova7mm7TmlrDlubbnu5nlh7rku6PnoIHpq5jkuq7jgIFMYVRlWOOAgUhUTUzltYzlhaXnrYnlsZXnpLrnpLrkvovjgIINCg==" as="fetch" crossorigin>
	<link rel="shortcut icon" href="https://pic1.imgdb.cn/item/698dc2031d67521e9b492114.png">
	<link rel="apple-touch-icon" href="https://pic1.imgdb.cn/item/698dc2031d67521e9b492114.png">
	<link rel="stylesheet" type="text/css" href="æ±‰è¯­å¤éŸ³æ‰‹å†Œ.css">
	<script src="s2t_map.js"></script>
	<style>
		:root{--bar-height:64px;--footer-height:50px;--bar-pad-x:18px;--bar-pad-y:12px;--glass-bg:rgba(255,255,255,0.35);--glass-border:1px solid rgba(208,215,230,0.72);--bottom-safe:calc(var(--footer-height) + 72px);--font-sans:'HarmonyOS Sans SC','HarmonyOS Sans','PingFang SC','Microsoft YaHei','Noto Sans CJK SC','Segoe UI',sans-serif;--btn-radius:10px}
		body{margin:0 !important;font-family:var(--font-sans); line-height:1.6; color:#222; background:#ecf2f9; padding-top:var(--bar-height); padding-bottom:var(--bottom-safe)}
			.topbar{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(255,255,255,0.35);-webkit-backdrop-filter:blur(15px) saturate(130%);backdrop-filter:blur(15px) saturate(130%);padding:var(--bar-pad-y) var(--bar-pad-x);box-shadow:0 2px 12px rgba(11,59,102,0.08);height:var(--bar-height);box-sizing:border-box;border-bottom:1px solid rgba(230,233,239,0.6);display:flex;align-items:center;gap:12px}
		.brand{font-weight:700;font-size:18px;color:#2b6cb0;white-space:nowrap}
		.search-wrap{flex:1;display:flex;align-items:center;gap:8px}
		#search-input{flex:1;padding:10px 12px;border:1px solid #d0d7e6;border-radius:8px;background:var(--glass-bg);font-size:16px;transition:border-color 0.2s,box-shadow 0.2s;-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%)}
		#search-input:focus{outline:none;border-color:#2b6cb0;box-shadow:0 0 0 2px rgba(43,108,176,0.1)}
		#search-mode{padding:10px 10px;border:1px solid #d0d7e6;border-radius:8px;background:var(--glass-bg);font-size:14px;cursor:pointer;transition:border-color 0.2s,box-shadow 0.2s;color:#222;-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%)}
		#search-mode:focus{outline:none;border-color:#2b6cb0;box-shadow:0 0 0 2px rgba(43,108,176,0.1)}
		#search-btn{padding:10px 16px;background:var(--glass-bg);color:#2b6cb0;border:var(--glass-border);border-radius:var(--btn-radius);cursor:pointer;transition:all 0.2s;font-weight:500;min-width:60px;-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);}
		#search-btn:hover{background:rgba(43,108,176,0.3);transform:translateY(-1px);box-shadow:0 2px 8px rgba(43,108,176,0.15)}
		#search-btn:active{transform:translateY(0)}
		#search-input.no-result{animation:shake .28s}
		@keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}
		#entries{max-width:980px;margin:40px auto;margin-left:520px;margin-right:30px;padding:12px}
		.main-container{max-width:980px;margin:40px auto;padding:0 20px}
		h1{font-size:28px;margin:14px 0 6px;color:#0b3b66}
		.polyphony-note{display:inline-block;margin:0 0 8px;padding:2px 8px;border-radius:999px;background:rgba(43,108,176,0.12);color:#1f4f86;font-size:12px;line-height:1.5}
		.entry-note{margin:10px 0;padding:10px 12px;border-radius:10px;border:1px solid rgba(43,108,176,0.20);background:rgba(43,108,176,0.06);line-height:1.7}
		table{border-collapse:collapse;margin:4px 0 10px;background:var(--glass-bg);border:var(--glass-border);width:100%;border-radius:6px;overflow:hidden;backdrop-filter:blur(12px) saturate(125%)}
		th,td{padding:8px 10px;border:1px solid #eef2f8;text-align:left;font-size:14px}
		th{background:rgba(43,108,176,0.05);font-weight:600}
		caption{font-weight:600;text-align:left;padding:6px 10px}
		.highlighted{animation:highlight 1.2s ease;box-shadow:0 0 0 4px rgba(43,108,176,0.12)}
		@keyframes highlight{0%{background:#fff7e6}50%{background:#fffde8}100%{background:transparent}}
		.entry-card{position:relative;background:var(--glass-bg);border-radius:14px;padding:16px 18px;margin:14px 6px;box-shadow:0 10px 30px rgba(11,20,45,0.06);border:1px solid rgba(255,255,255,0.6);backdrop-filter:blur(10px) saturate(120%);transition:transform .28s ease,box-shadow .28s ease,opacity .36s ease;opacity:0;transform:translateY(12px) scale(.998);overflow:hidden}
		.entry-card.show{opacity:1;transform:none}
		.entry-card:hover{transform:translateY(-8px) scale(1.01);box-shadow:0 26px 54px rgba(11,20,45,0.10)}
		.copy-btn{position:absolute;top:10px;right:10px;padding:4px 9px;background:rgba(255,255,255,0.72);color:#2b6cb0;border:var(--glass-border);border-radius:var(--btn-radius);cursor:pointer;font-size:12px;opacity:.72;transition:all 0.2s;backdrop-filter:blur(12px) saturate(125%)}
		.entry-card:hover .copy-btn{opacity:1}
		.copy-btn:hover{background:rgba(255,255,255,0.75);transform:scale(1.05)}
		.copy-btn.copied{background:#4caf50;color:#fff}
		#jump-input{padding:8px 10px;border:1px solid #d0d7e6;border-radius:6px;background:#fff;font-size:14px;transition:border-color 0.2s}
		#jump-input:focus{outline:none;border-color:#2b6cb0;box-shadow:0 0 0 2px rgba(43,108,176,0.1)}
			.side-fab{position:fixed;right:30px;width:48px;height:48px;background:var(--glass-bg);color:#2b6cb0;border:var(--glass-border);border-radius:var(--btn-radius);cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:1200;opacity:0;transform:translateY(8px);pointer-events:none;transition:opacity .24s ease,transform .24s ease,background-color .22s ease,box-shadow .22s ease;box-shadow:0 4px 12px rgba(43,108,176,0.2);-webkit-backdrop-filter:blur(16px) saturate(140%);backdrop-filter:blur(16px) saturate(140%);padding:0;text-decoration:none}
			.side-fab:hover{background:rgba(43,108,176,0.3);transform:translateY(0);box-shadow:0 6px 16px rgba(43,108,176,0.3)}
		.side-fab.show{opacity:1;transform:none;pointer-events:auto}
		.page-btn{opacity:1 !important;transform:none !important;pointer-events:auto !important}
		.side-fab svg{width:18px;height:18px;fill:none !important;stroke:currentColor;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round}
		#scroll-to-top{bottom:calc(var(--footer-height) + 90px)}
		#scroll-to-bottom{bottom:calc(var(--footer-height) + 30px)}
		#scroll-to-bottom svg{transform:rotate(180deg)}
		#page-prev{bottom:calc(var(--footer-height) + 150px)}
		#page-next{bottom:calc(var(--footer-height) + 210px)}
		.page-btn{right:20px}
		#share-btn:hover{background:rgba(43,108,176,0.3);transform:translateY(-2px);box-shadow:0 4px 12px rgba(43,108,176,0.2)}
		#share-btn.copied{background:rgba(76,175,80,0.2);color:#4caf50;border-color:rgba(76,175,80,0.4)}
		#sidebar{position:fixed;left:24px;top:80px;width:470px;z-index:500;transition:all 0.3s ease}
		#sidebar-mobile-toggle{display:none !important;position:fixed;left:12px;right:auto;bottom:calc(var(--footer-height) + 30px);z-index:1300;width:48px;height:48px;padding:0;border-radius:var(--btn-radius);opacity:1;pointer-events:auto}
		#articles-mobile-btn{display:none !important;position:fixed;right:16px;bottom:280px;z-index:1300;width:48px;height:48px;border-radius:var(--btn-radius);opacity:1 !important;pointer-events:auto !important;transform:none !important;text-decoration:none}
		.sidebar-overlay{display:none}
		.sidebar-card{padding:12px;border-radius:16px;background:rgba(255,255,255,0.46);border:1px solid rgba(255,255,255,0.72);box-shadow:0 16px 40px rgba(16,34,58,0.10);-webkit-backdrop-filter:blur(18px) saturate(130%);backdrop-filter:blur(18px) saturate(130%)}
		.sidebar-cover-wrap{position:relative;overflow:hidden;border-radius:12px}
		.sidebar-cover-wrap::after{content:none}
		#sidebar img{width:100%;height:138px;border-radius:12px;box-shadow:0 2px 8px rgba(43,108,176,0.12);object-fit:cover;transition:all 0.4s ease;display:block}
		#sidebar img:hover{transform:scale(1.04);filter:saturate(1.1)}
		#sidebar #share-btn{width:100%;margin-top:10px;padding:9px;background:rgba(43,108,176,0.16);color:#1f4f86;border:1px solid rgba(43,108,176,0.26);border-radius:var(--btn-radius);cursor:pointer;font-weight:600;font-size:12px;transition:all 0.2s;-webkit-backdrop-filter:blur(8px) saturate(120%);backdrop-filter:blur(8px) saturate(120%)}
		#sidebar #share-btn:hover{background:rgba(43,108,176,0.25);transform:translateY(-1px);box-shadow:0 4px 12px rgba(43,108,176,0.2)}
		#sidebar #share-btn.copied{background:rgba(76,175,80,0.2);color:#2f7a3f;border-color:rgba(76,175,80,0.4)}
		.sidebar-slogan{margin:12px 4px 10px;color:#1f3f67;font-size:12px;line-height:1.55}
		.sidebar-section{margin-top:8px;padding-top:10px;border-top:1px dashed rgba(43,108,176,0.25)}
		.sidebar-section-title{font-size:12px;font-weight:700;color:#2b6cb0;display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
		#article-count{font-size:11px;color:#5f7ea1}
		#article-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
		#article-list li{margin:0}
		#article-list a{display:block;padding:8px 10px;border-radius:10px;text-decoration:none;color:#1f3f67;background:rgba(255,255,255,0.42);border:1px solid rgba(208,215,230,0.72);transition:all .2s}
		#article-list a:hover{transform:translateX(2px);background:rgba(43,108,176,0.12);border-color:rgba(43,108,176,0.25)}
		.article-title{display:block;font-size:12px;font-weight:600;line-height:1.4}
		.article-meta{display:block;margin-top:3px;font-size:11px;color:#60758f}
		.article-loading{padding:8px 10px;border-radius:10px;background:rgba(255,255,255,0.42);font-size:12px;color:#60758f}
		.article-more{display:block;margin-top:8px;text-align:center;padding:8px 10px;border-radius:10px;text-decoration:none;color:#2b6cb0;background:rgba(43,108,176,0.10);border:1px solid rgba(43,108,176,0.25);transition:all .2s}
		.article-more:hover{transform:translateY(-1px);background:rgba(43,108,176,0.18)}
			footer.site-footer{position:fixed !important;left:0 !important;right:0 !important;bottom:0 !important;width:100% !important;max-width:none !important;z-index:1000 !important;margin:0 !important;border-radius:0 !important;background:var(--glass-bg) !important;-webkit-backdrop-filter:blur(18px) saturate(145%) !important;backdrop-filter:blur(18px) saturate(145%) !important;padding:8px 12px !important;height:var(--footer-height) !important;box-sizing:border-box !important;border-top:1px solid rgba(230,233,239,0.6) !important;border-left:0 !important;border-right:0 !important;border-bottom:0 !important;box-shadow:none !important;display:flex;align-items:center;justify-content:center;text-align:center;color:#666;font-size:13px}
		footer{background:var(--glass-bg) !important;border:var(--glass-border) !important;backdrop-filter:blur(12px) saturate(125%) !important}
		#share-btn,#jump-input{background:var(--glass-bg) !important;border:var(--glass-border) !important;backdrop-filter:blur(12px) saturate(125%) !important}
		.footer-content{display:flex;align-items:center;gap:8px;white-space:nowrap}
		.footer-text{display:flex;align-items:center;gap:6px}
		.footer-sep{opacity:.65}
		.footer-link{display:inline-flex;align-items:center;gap:4px;color:#2b6cb0;text-decoration:none;opacity:.85;transition:opacity .2s,transform .2s}
		.footer-link:hover{opacity:1;transform:translateY(-1px)}
		.footer-link svg{width:12px;height:12px;display:block}
			.footer-btn{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;color:#2b6cb0;cursor:pointer;transition:opacity .2s,transform .2s,background-color .2s,color .2s;text-decoration:none;opacity:.78;border-radius:6px}
			.footer-btn:hover{opacity:1;transform:translateY(-1px);background:rgba(43,108,176,0.25);color:#2b6cb0}
		@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){
			.topbar,#search-input,#search-mode,#search-btn,.side-fab,.sidebar-card,#sidebar #share-btn,footer.site-footer{background:rgba(255,255,255,0.78) !important}
		}
		@media (min-width:769px){
			#sidebar-mobile-toggle{display:none !important}
		}
		@media (max-width:768px){
			:root{--bar-height:72px;--footer-height:64px}
			body{padding-top:102px !important;padding-bottom:300px !important}
			
			/* é¡¶éƒ¨æ ä¸¤è¡Œå¸ƒå±€ */
			.topbar{padding:0;background:transparent;backdrop-filter:none;border:0;box-shadow:none;height:0}
			.brand,.topbar-warning{display:none}
			.search-wrap{width:calc(100% - 24px);margin:0 auto;gap:8px;padding:6px 0 0}
			#search-input{height:40px;padding:0 12px;font-size:14px;line-height:40px;box-sizing:border-box;flex:1;background:rgba(255,255,255,0.52);border:1px solid rgba(208,215,230,0.82);-webkit-backdrop-filter:blur(12px) saturate(125%);backdrop-filter:blur(12px) saturate(125%);box-shadow:0 4px 14px rgba(11,59,102,0.08)}
			#search-btn{height:40px;padding:0 14px;font-size:14px;min-width:60px;box-sizing:border-box}
			
			/* ä¾§è¾¹æ éšè— */
			#sidebar-mobile-toggle{display:inline-flex;align-items:center;justify-content:center;gap:6px;opacity:1 !important;pointer-events:auto !important;transform:none !important}
			#articles-mobile-btn{display:inline-flex !important;align-items:center;justify-content:center}
			#sidebar-mobile-toggle{top:10px;left:10px;bottom:auto}
			#articles-mobile-btn{top:auto;right:16px;bottom:294px}
			.sidebar-overlay{display:block;position:fixed;inset:0;background:rgba(10,22,38,.32);backdrop-filter:blur(3px);z-index:490;opacity:0;pointer-events:none;transition:opacity .25s ease}
			#sidebar{display:block;left:12px;top:126px;width:min(92vw,470px);max-height:calc(100vh - 190px);overflow:auto;z-index:500;transform:translateX(-115%);opacity:0;pointer-events:none}
			body.sidebar-open #sidebar{transform:translateX(0);opacity:1;pointer-events:auto}
			body.sidebar-open .sidebar-overlay{opacity:1;pointer-events:auto}
			
			/* å†…å®¹åŒºåŸŸé€‚é… */
			.main-container{max-width:100% !important;margin:0 auto 20px !important;padding:0 12px !important}
			#entries{padding:0 12px !important;margin-left:0 !important;margin-right:0 !important}
			h1{font-size:22px;margin:10px 0 4px}
			
			/* å¡ç‰‡é€‚é… - ç§»é™¤ hover æ•ˆæœï¼Œå¤åˆ¶æŒ‰é’®å§‹ç»ˆæ˜¾ç¤º */
			.entry-card{padding:14px 12px;margin:10px 0;border-radius:12px}
			.entry-card:hover{transform:none;box-shadow:0 10px 30px rgba(11,20,45,0.06)}
			.copy-btn{position:static;bottom:auto;right:auto;padding:8px 14px;font-size:13px;margin-top:10px;width:100%;text-align:center;opacity:1}
			.entry-card:hover .copy-btn{opacity:1}
			
			/* è¡¨æ ¼é€‚é… */
			table{font-size:13px}
			th,td{padding:6px 8px}
			
			/* æ‚¬æµ®æŒ‰é’®é€‚é… - ç»Ÿä¸€æ ·å¼ */
			.side-fab{right:16px !important;width:48px !important;height:48px !important}
			#scroll-to-top{bottom:114px !important}
			#scroll-to-bottom{bottom:54px !important}
			#page-prev{bottom:174px !important}
			#page-next{bottom:234px !important}
			.page-btn{right:16px !important}
			.side-fab svg{width:20px;height:20px}
			
			/* é¡µè„šé€‚é… */
			footer.site-footer{inset:auto 12px 10px 12px !important;width:auto !important;max-width:none !important;height:64px !important;padding:10px 12px !important;border:1px solid rgba(230,233,239,0.6) !important;border-radius:14px !important;box-shadow:0 -2px 10px rgba(11,59,102,0.06) !important}
			footer.site-footer .footer-content{gap:8px}
			.footer-text{font-size:12px}
			.footer-btn{width:20px;height:20px}
			.footer-btn svg{width:18px;height:18px}
		}
	</style>
		<script>
	(function(){
		const INDEX_PATH = 'chunks/index.json';
		const CHUNK_URL = (n) => `chunks/part-${n}.html`;
		const CATALOG_PATH = 'articles/catalog.md';
		let indexData = null;
		let conv = null;
		let currentChunk = 0;
		let loaded = new Map();

		function loadScript(src){
			return new Promise((res,rej)=>{
				const s=document.createElement('script'); s.src=src; s.async=true; s.onload=()=>res(true); s.onerror=()=>rej(false); document.head.appendChild(s);
			});
		}

		async function ensureConverter(){
			console.log('âœ“ ä½¿ç”¨æœ¬åœ°ç®€ç¹æ˜ å°„è¡¨ (s2t_map.js)');
			// ä½¿ç”¨å…¨å±€çš„ s2tMapï¼ˆä» s2t_map.js åŠ è½½ï¼‰
			if(typeof s2tMap === 'undefined') {
				console.warn('âš  s2tMap æœªå®šä¹‰ï¼Œç­‰å¾…åŠ è½½...');
				// ç­‰å¾… s2t_map.js åŠ è½½
				let retry = 0;
				while(typeof s2tMap === 'undefined' && retry < 50) {
					await new Promise(r => setTimeout(r, 100));
					retry++;
				}
			}
			
			return {
				toS: (t)=>t, // æš‚ä¸æ”¯æŒç¹è½¬ç®€
				toT: (t)=>{
					// ç®€è½¬ç¹ï¼ˆä½¿ç”¨å…¨å±€æ˜ å°„è¡¨ï¼‰
					if(typeof s2tMap === 'undefined') {
						console.warn('âš  s2tMap ä»æœªå®šä¹‰');
						return t;
					}
					let result = '';
					for(let i=0; i<t.length; i++){
						const char = t[i];
						result += s2tMap[char] || char;
					}
					return result;
				}
			};
		}

		async function fetchJSON(url){ try{ const r=await fetch(url, { cache: 'force-cache' }); if(!r.ok) throw 0; return await r.json(); }catch(e){ console.error('åŠ è½½å¤±è´¥: '+url, e); return null } }

		function parseCatalogMarkdown(md){
			const lines = (md || '').split(/\r?\n/);
			const items = [];
			for(const rawLine of lines){
				const line = rawLine.trim();
				if(!line.startsWith('- ')) continue;
				const m = line.match(/^- \[(.+?)\]\((.+?)\)\s*\|\s*([^|]+?)\s*\|\s*([^|]+?)(?:\s*\|\s*(.+))?$/);
				if(!m) continue;
				items.push({
					title: m[1].trim(),
					path: m[2].trim(),
					date: m[3].trim(),
					author: m[4].trim(),
					summary: (m[5] || '').trim()
				});
			}
			return items;
		}

		function renderArticleList(items){
			const listEl = document.getElementById('article-list');
			const countEl = document.getElementById('article-count');
			if(!listEl || !countEl) return;

			countEl.textContent = `${items.length}ç¯‡`;
			if(!items.length){
				listEl.innerHTML = '<li class="article-loading">æš‚æ— æ–‡ç« </li>';
				return;
			}

			listEl.innerHTML = items.map((item)=>{
				const href = `article.html?file=${encodeURIComponent(item.path)}`;
				const meta = [item.date, item.author].filter(Boolean).join(' Â· ');
				const title = (item.title || '').replace(/"/g, '&quot;');
				const summary = (item.summary || '').replace(/"/g, '&quot;');
				return `<li><a href="${href}" title="${summary}"><span class="article-title">${title}</span><span class="article-meta">${meta}</span></a></li>`;
			}).join('');
		}

		async function loadArticleCatalog(){
			try{
				const r = await fetch(CATALOG_PATH, { cache: 'force-cache' });
				if(!r.ok) throw new Error(`HTTP ${r.status}`);
				const text = await r.text();
				renderArticleList(parseCatalogMarkdown(text));
			}catch(e){
				console.error('ç›®å½•åŠ è½½å¤±è´¥', e);
				renderArticleList([]);
			}
		}

		function formatCardForCopy(card, entryUrl){
			const blocks = [];
			const children = Array.from(card.children).filter((el)=>!el.classList.contains('copy-btn'));

			for(const el of children){
				const tag = el.tagName.toLowerCase();
				if(tag === 'br') continue;

				if(tag === 'h1'){
					const t = (el.textContent || '').trim();
					if(t) blocks.push(`ã€${t}ã€‘`);
					continue;
				}

				if(tag === 'table'){
					const tableLines = [];
					const caption = el.querySelector('caption')?.textContent?.trim();
					if(caption) tableLines.push(caption);
					const rows = el.querySelectorAll('tr');
					for(const row of rows){
						const cells = row.querySelectorAll('th,td');
						const rowText = Array.from(cells)
							.map((cell)=>cell.textContent?.replace(/\s+/g, ' ').trim() || '')
							.filter(Boolean)
							.join(' | ');
						if(rowText) tableLines.push(rowText);
					}
					if(tableLines.length) blocks.push(tableLines.join('\n'));
					continue;
				}

				if(tag === 'h4'){
					const t = (el.textContent || '').trim();
					if(t) blocks.push(t);
					continue;
				}

				if(tag === 'p' || tag === 'u' || tag === 'div'){
					const t = (el.textContent || '').replace(/\s+/g, ' ').trim();
					if(t) blocks.push(t);
				}
			}

			const cleaned = blocks.join('\n\n').replace(/\n{3,}/g, '\n\n').trim();
			return `${cleaned}\n\nâ€”â€” æ±‰è¯­å¤éŸ³æ‰‹å†Œ\n${entryUrl}`;
		}

		function updateButtons(){
			const pagePrev = document.getElementById('page-prev');
			const pageNext = document.getElementById('page-next');
			if(pagePrev) {
				pagePrev.disabled = currentChunk === 0;
				pagePrev.style.opacity = currentChunk === 0 ? '0.4' : '1';
				pagePrev.style.pointerEvents = currentChunk === 0 ? 'none' : 'auto';
			}
			if(pageNext) {
				pageNext.disabled = currentChunk >= indexData.chunks - 1;
				pageNext.style.opacity = currentChunk >= indexData.chunks - 1 ? '0.4' : '1';
				pageNext.style.pointerEvents = currentChunk >= indexData.chunks - 1 ? 'none' : 'auto';
			}
		}

		async function goToChunk(n){
			if(n < 0 || n >= indexData.chunks) return;
			currentChunk = n;
			updateButtons();
			const entries = document.getElementById('entries');
			entries.innerHTML = '<div style="padding:20px;text-align:center;color:#999;">åŠ è½½ä¸­...</div>';
			await loadChunk(n);
			window.scrollTo({top: 0, behavior: 'smooth'});
		}

		async function loadChunk(n){ 
			const url = CHUNK_URL(n);
			let html = loaded.get(n) || '';
			console.log('å¼€å§‹åŠ è½½', url);
			try{ 
				if(!html){
					const r = await fetch(url, { cache: 'force-cache' }); 
					console.log('fetch å“åº”:', r.status, r.ok);
					if(!r.ok) throw new Error('HTTP ' + r.status); 
					html = await r.text(); 
					loaded.set(n, html);
				}
				console.log('è·å–åˆ° HTMLï¼Œé•¿åº¦:', html.length);
				const entries = document.getElementById('entries');
				entries.innerHTML = '';
				const wrapper = document.createElement('div'); 
				wrapper.className='entry-chunk'; 
				wrapper.innerHTML = html;
				
				const headingsForChunk = indexData.headings.filter(h=>h.chunk===n).sort((a,b)=>a.index-b.index);
				const h1s = wrapper.querySelectorAll('h1');
				console.log('æ‰¾åˆ°', h1s.length, 'ä¸ª h1 æ ‡ç­¾ï¼ŒæœŸæœ›', headingsForChunk.length, 'ä¸ª');
				for(let i=0;i<h1s.length && i<headingsForChunk.length;i++){ 
					try{ h1s[i].id = headingsForChunk[i].id; }catch(e){} 
				}
				
				// æ·»åŠ  show ç±»ä»¥ä½¿å¡ç‰‡å¯è§ï¼Œå¹¶ä¸ºæ¯ä¸ªå¡ç‰‡æ·»åŠ å¤åˆ¶æŒ‰é’®
				const cards = wrapper.querySelectorAll('.entry-card');
				console.log('ä¸º', cards.length, 'ä¸ªå¡ç‰‡æ·»åŠ  show ç±»å’Œå¤åˆ¶æŒ‰é’®');
				const titleCount = new Map();
				for(const card of cards){
					const h1 = card.querySelector('h1');
					if(!h1) continue;
					const key = (h1.textContent || '').trim();
					if(!key) continue;
					titleCount.set(key, (titleCount.get(key) || 0) + 1);
				}
				const titleSeq = new Map();
				for(let card of cards) {
					// åªå¤„ç†æœ‰ h1 æ ‡é¢˜çš„å¡ç‰‡ï¼Œè¿‡æ»¤æ‰å­¤ç«‹çš„å­—
					const h1 = card.querySelector('h1');
					if(!h1) {
						// æ²¡æœ‰ h1 çš„å¡ç‰‡æ˜¯å­¤ç«‹å­—ï¼Œç›´æ¥ç§»é™¤
						card.remove();
						continue;
					}
					const edgeNodes = [card.firstChild, card.lastChild];
					for(const node of edgeNodes){
						if(!node || node.nodeType !== Node.TEXT_NODE) continue;
						const raw = node.textContent || '';
						const t = raw.trim();
						if(t && t.length <= 3 && !/[ï¼Œã€‚ï¼ï¼Ÿï¼›ï¼š,.!?;:\s]/u.test(t)){
							node.remove();
						}
					}

					// å…¼å®¹ååŠåˆ†ç‰‡é‡Œâ€œ<u>éŸ³æ ‡</u> + ä¸­å¤éŸ³éŸµåœ°ä½è¡¨â€çš„å†™æ³•ï¼Œç»Ÿä¸€è¡¥æˆâ€œä¸Šå¤éŸ³â€è¡¨æ ¼æ¡†
					const underlinedIPA = card.querySelectorAll('u');
					for(const u of underlinedIPA){
						if(!u || !u.parentElement || u.closest('table')) continue;
						const ipa = (u.textContent || '').trim();
						if(!ipa) continue;
						const next = u.nextElementSibling;
						if(!next || next.tagName.toLowerCase() !== 'table') continue;
						const cap = next.querySelector('caption');
						const capText = (cap?.textContent || '').trim();
						if(!capText.includes('ä¸­å¤')) continue;

						const soundTable = document.createElement('table');
						soundTable.innerHTML = `<tr><th>ä¸Šå¤éŸ³</th><td>${ipa}</td></tr>`;
						u.insertAdjacentElement('beforebegin', soundTable);
						u.remove();
					}
					
					card.classList.add('show');
					card.querySelector('.polyphony-note')?.remove();

					const key = (h1.textContent || '').trim();
					const total = titleCount.get(key) || 0;
					if(total > 1){
						const idx = (titleSeq.get(key) || 0) + 1;
						titleSeq.set(key, idx);
						const note = document.createElement('div');
						note.className = 'polyphony-note';
						note.textContent = `å¤šéŸ³å­— Â· ç¬¬ ${idx} è¯»éŸ³ / å…± ${total} è¯»éŸ³`;
						h1.insertAdjacentElement('afterend', note);
					}

					const notes = card.querySelectorAll('p');
					for(const note of notes){
						const text = (note.textContent || '').replace(/\s+/g, ' ').trim();
						if(!text){
							note.remove();
							continue;
						}
						note.classList.add('entry-note');
					}

					// æ·»åŠ å¤åˆ¶æŒ‰é’®
					if(!card.querySelector('.copy-btn')) {
						const copyBtn = document.createElement('button');
						copyBtn.className = 'copy-btn';
						copyBtn.textContent = 'å¤åˆ¶';
						copyBtn.addEventListener('click', async (e) => {
							e.stopPropagation();
							const hid = card.querySelector('h1')?.id || '';
							const entryUrl = `${location.href.split('#')[0]}#${encodeURIComponent(hid)}`;
							const cardText = formatCardForCopy(card, entryUrl);
							try{
								await navigator.clipboard.writeText(cardText);
								copyBtn.classList.add('copied');
								copyBtn.textContent = 'å·²å¤åˆ¶';
								setTimeout(() => {
									copyBtn.classList.remove('copied');
									copyBtn.textContent = 'å¤åˆ¶';
								}, 2000);
							}catch(err){
								console.error('å¤åˆ¶å¤±è´¥:', err);
							}
						});
						card.appendChild(copyBtn);
					}
				}
				
				entries.appendChild(wrapper);
				console.log('å—', n, 'åŠ è½½å®Œæˆ');
			}catch(e){ 
				console.error('åŠ è½½å¤±è´¥ chunk '+n, e);
				const entries = document.getElementById('entries');
				entries.innerHTML = '<div style="padding:20px;color:#d32f2f;text-align:center;">åŠ è½½å¤±è´¥: ' + e.message + '</div>';
			}
		}

		document.addEventListener('DOMContentLoaded', async ()=>{
			const entries = document.getElementById('entries');
			if(!entries) {
				console.error('æœªæ‰¾åˆ° #entries div');
				return;
			}
			
			console.log('å¼€å§‹åŠ è½½ INDEX_PATH:', INDEX_PATH);
			indexData = await fetchJSON(INDEX_PATH);
			
			if(!indexData){ 
				console.error('ç´¢å¼•æ–‡ä»¶åŠ è½½å¤±è´¥');
				entries.innerHTML = 'âŒ æ— æ³•åŠ è½½ç´¢å¼•æ–‡ä»¶'; 
				return; 
			}
			
			console.log('ç´¢å¼•åŠ è½½æˆåŠŸï¼Œæ€»å—æ•°:', indexData.chunks);
			
			console.log('å¼€å§‹åŠ è½½ç¬¬ä¸€ä¸ªå—');
			await goToChunk(0);

			if(location.hash){ 
				const hid = decodeURIComponent(location.hash.slice(1)); 
				const target = indexData.headings.find(h=>h.id===hid); 
				if(target) await goToChunk(target.chunk);
			}

			const input = document.getElementById('search-input'); 
			const btn = document.getElementById('search-btn');
			
			// è·å–æ‰€æœ‰ç¹ä½“å­—é›†åˆï¼ˆç”¨äºå¿«é€ŸæŸ¥æ‰¾ï¼‰
			const tradCharSet = new Set();
			const charToHeading = new Map(); // å­— -> æ ‡é¢˜å¯¹è±¡
			for(const h of indexData.headings){
				const title = h.title;
				if(title.length === 1) {
					tradCharSet.add(title);
					if(!charToHeading.has(title)) charToHeading.set(title, h);
				}
			}
			console.log('ç´¢å¼•ä¸­çš„ç¹ä½“å­—æ•°:', tradCharSet.size);
			
			function norm(s){ return (s||'').normalize('NFKC').trim(); }
			
			function findHeading(q){ 
				if(!q) return null;
				const qNorm = norm(q);
				
				// ç›´æ¥åœ¨ç´¢å¼•ä¸­æŸ¥æ‰¾
				for(const h of indexData.headings){ 
					if(norm(h.title) === qNorm) {
						return h;
					}
					for(const v of h.variants||[]){ 
						if(norm(v) === qNorm) {
							return h;
						}
					}
				}
				
				return null; 
			}

			async function performSearch(){ 
				let q = (input.value||'').trim(); 
				if(!q) return;
				
				console.log('=== æœç´¢å¼€å§‹ ===');
				console.log('è¾“å…¥:', q);
				
				// ç”¨æˆ·åº”è¯¥åœ¨å·¦è¾¹é¢æ¿è½¬æ¢åï¼Œåœ¨å³è¾¹é¢æ¿ç›´æ¥è¾“å…¥ç¹ä½“å­—
				const h = findHeading(q);
				
				if(!h){ 
					console.log('âœ— æœªæ‰¾åˆ°åŒ¹é…é¡¹');
					input.classList.add('no-result'); 
					setTimeout(()=>input.classList.remove('no-result'),600); 
					return; 
				}
				
				console.log('âœ“ æ‰¾åˆ°:', h.title);
				console.log('=== æœç´¢æˆåŠŸ ===');
				await goToChunk(h.chunk);
				setTimeout(() => {
					const el = document.getElementById(h.id); 
					if(el){ 
						el.scrollIntoView({behavior:'smooth',block:'center'}); 
						el.classList.add('highlighted'); 
						setTimeout(()=>el.classList.remove('highlighted'),2000); 
						history.replaceState(null,'','#'+encodeURIComponent(h.id)); 
					}
				}, 100);
			}

			input.addEventListener('keydown', e=>{ if(e.key==='Enter') performSearch(); });
			btn.addEventListener('click', performSearch);

			// å³ä¾§ç¿»é¡µæŒ‰é’®äº‹ä»¶ç»‘å®š
			const pagePrev = document.getElementById('page-prev');
			const pageNext = document.getElementById('page-next');

			if(pagePrev) pagePrev.addEventListener('click', () => goToChunk(currentChunk - 1));
			if(pageNext) pageNext.addEventListener('click', () => goToChunk(currentChunk + 1));

			updateButtons();
			loadArticleCatalog();
		});
	})();
	</script>
</head>
<body>
<script>
// åœ¨ DOM åŠ è½½å‰æ£€æµ‹è®¾å¤‡ç±»å‹
(function() {
	const isMobile = () => window.innerWidth <= 768;
	const updateDeviceClass = () => {
		if (isMobile()) {
			document.body.classList.add('mobile');
			document.body.classList.remove('desktop');
		} else {
			document.body.classList.add('desktop');
			document.body.classList.remove('mobile');
		}
	};
	updateDeviceClass();
	window.addEventListener('resize', updateDeviceClass);
	window.__isMobile = isMobile;
})();
</script>
<header class="topbar">
	<div class="brand">æ±‰è¯­å¤éŸ³æ‰‹å†Œ</div>
	<div style="color:#e74c3c;font-size:12px;font-weight:500;margin-right:auto;" class="topbar-warning">â€» ä»…æ”¯æŒç¹ä½“å­—</div>
	<div class="search-wrap">
		<input id="search-input" placeholder="è¾“å…¥ç¹ä½“å­—æœç´¢" aria-label="æœç´¢å­—">
		<button id="search-btn">æŸ¥æ‰¾</button>
	</div>
</header>
<button id="sidebar-mobile-toggle" class="side-fab" type="button" title="èœå•">ç›®å½•</button>
<a id="articles-mobile-btn" class="side-fab" href="articles.html" title="æ–‡ç« ">æ–‡</a>
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<div id="sidebar">
	<div class="sidebar-card">
		<div class="sidebar-cover-wrap">
			<img src="https://pic1.imgdb.cn/item/698dc2031d67521e9b492114.png" alt="æ±‰è¯­å¤éŸ³æ‰‹å†Œ">
		</div>
		<button id="share-btn" type="button">åˆ†äº«å½“å‰é¡µ</button>
		<p class="sidebar-slogan">ä¸€å­—ä¸€æºï¼Œçºµè§ˆä¸Šå¤éŸ³ç³»ä¸ä¸­å¤éŸ³éŸµè„‰ç»œã€‚</p>
		<div class="sidebar-section">
			<div class="sidebar-section-title">
				<span>ç«™å†…æ–‡ç« </span>
				<span id="article-count">åŠ è½½ä¸­</span>
			</div>
			<ul id="article-list">
				<li class="article-loading">æ­£åœ¨åŠ è½½ç›®å½•...</li>
			</ul>
			<a class="article-more" href="articles.html">æŸ¥çœ‹å…¨éƒ¨æ–‡ç« </a>
		</div>
	</div>
</div>

<div class="main-container">
	<div id="entries"></div>
</div>

<div style="height:30px"></div>

<footer class="site-footer">
	<div class="footer-content">
		<span class="footer-text">Â© 2026 Takion Kroslin</span>
		<span class="footer-sep">|</span>
		<a href="https://github.com/TakionKroslin/dictionary" target="_blank" class="footer-link" title="GitHub" aria-label="GitHub">
			<svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
				<path d="M12 .5C5.65.5.5 5.66.5 12.02c0 5.09 3.3 9.41 7.88 10.94.58.1.79-.25.79-.56v-2.02c-3.2.69-3.88-1.55-3.88-1.55-.53-1.33-1.28-1.69-1.28-1.69-1.04-.71.08-.7.08-.7 1.15.09 1.75 1.18 1.75 1.18 1.01 1.75 2.67 1.24 3.33.95.1-.73.4-1.24.72-1.52-2.56-.29-5.25-1.28-5.25-5.69 0-1.26.45-2.3 1.18-3.11-.12-.29-.51-1.46.11-3.04 0 0 .96-.31 3.15 1.19a10.8 10.8 0 0 1 5.74 0c2.18-1.5 3.14-1.19 3.14-1.19.62 1.58.23 2.75.11 3.04.73.81 1.18 1.85 1.18 3.11 0 4.42-2.7 5.4-5.27 5.68.41.36.78 1.07.78 2.15v3.19c0 .31.21.67.8.56a11.54 11.54 0 0 0 7.87-10.94C23.5 5.66 18.35.5 12 .5z"/>
			</svg>
			<span>GitHub</span>
		</a>
	</div>
</footer>

<button id="scroll-to-top" class="side-fab" title="å›åˆ°é¡¶éƒ¨">
	<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
		<polyline points="6 14 12 8 18 14"></polyline>
	</svg>
</button>
<button id="scroll-to-bottom" class="side-fab" title="åˆ°åº•éƒ¨">
	<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
		<polyline points="6 14 12 8 18 14"></polyline>
	</svg>
</button>
<button id="page-prev" class="side-fab page-btn" title="ä¸Šä¸€é¡µ">
	<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
		<polyline points="15 18 9 12 15 6"></polyline>
	</svg>
</button>
<button id="page-next" class="side-fab page-btn" title="ä¸‹ä¸€é¡µ">
	<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
		<polyline points="9 18 15 12 9 6"></polyline>
	</svg>
</button>

<script>
// åˆ†äº«æŒ‰é’®åŠŸèƒ½
const shareBtn = document.getElementById('share-btn');
if(shareBtn) {
	shareBtn.addEventListener('click', () => {
		const shareUrl = 'https://guyin.tahino.top/';
		navigator.clipboard.writeText(shareUrl).then(() => {
			shareBtn.classList.add('copied');
			shareBtn.textContent = 'ğŸ”— é“¾æ¥å·²å¤åˆ¶';
			setTimeout(() => {
				shareBtn.classList.remove('copied');
				shareBtn.textContent = 'åˆ†äº«å½“å‰é¡µ';
			}, 3000);
		}).catch(err => console.error('å¤åˆ¶å¤±è´¥:', err));
	});
}

// å›åˆ°é¡¶éƒ¨/åº•éƒ¨æŒ‰é’®åŠŸèƒ½
const scrollBtn = document.getElementById('scroll-to-top');
const scrollBottomBtn = document.getElementById('scroll-to-bottom');
const sidebarToggleBtn = document.getElementById('sidebar-mobile-toggle');
const sidebarOverlay = document.getElementById('sidebar-overlay');
window.addEventListener('scroll', () => {
	const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
	if(window.scrollY > 300) {
		scrollBtn.classList.add('show');
	} else {
		scrollBtn.classList.remove('show');
	}
	if(window.scrollY < maxScroll - 300) {
		scrollBottomBtn.classList.add('show');
	} else {
		scrollBottomBtn.classList.remove('show');
	}
});
scrollBtn.addEventListener('click', () => {
	window.scrollTo({top: 0, behavior: 'smooth'});
});
scrollBottomBtn.addEventListener('click', () => {
	window.scrollTo({top: document.documentElement.scrollHeight, behavior: 'smooth'});
});

if(sidebarToggleBtn) {
	sidebarToggleBtn.addEventListener('click', () => {
		document.body.classList.toggle('sidebar-open');
	});
}
if(sidebarOverlay) {
	sidebarOverlay.addEventListener('click', () => {
		document.body.classList.remove('sidebar-open');
	});
}
window.addEventListener('resize', () => {
	if(window.innerWidth > 768) document.body.classList.remove('sidebar-open');
});
</script>

</body>
</html>
